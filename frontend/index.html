<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Expense Tracker</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://unpkg.com/@lottiefiles/dotlottie-wc@0.7.1/dist/dotlottie-wc.js" type="module"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
  <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
  <!-- Toastify CSS -->
  <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
  <!-- Toastify JS -->
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/toastify-js"></script>

  <style>
    @media (min-width: 481px) and (max-width: 1024px) {
      .navbar-right {
        display: flex;
        top: 5%;
        right: -5%;
      }
      .profile-avatar{
        font-size: 3.5vw;
        width: 60px;
        height: 60px;
      }
      .navbar-right .nav-item{
        display: none;
      }
      .dropdown{
        margin-top: 40%;
      }
      #logoutBtn{
        font-size: 2.5vw;
      }
    }
  </style>
</head>
<body>
  <!-- Navbar -->
<header class="navbar">
  <div class="navbar-left">
    
    <h1 class="app-title">üí∞ Expense Tracker</h1>
  
  </div>
  <div class="navbar-right">
    <!-- You can add future links or icons here -->
     <span class="nav-item"><a href="home.html" class="nav-item">Home</a></span>
    <span class="nav-item"><a href="index.html" class="nav-item">Dashboard</a></span>
    <div class="profile-container">
    <div class="profile-avatar" id="profile-avatar"></div>
      <div class="dropdown" id="dropdown">
        <button id="logoutBtn">Logout</button>
      </div>
      </div>
    </div>
  </div>
</header>
<!-- Logout Confirmation Modal -->
<div class="modal" id="logout-modal">
  <div class="modal-content">
    <h3>Confirm Logout <img width="30" height="30" src="https://img.icons8.com/sf-black/64/FA5252/exit.png" alt="exit"/></h3>
    <p>Are you sure you want to log out?</p>
    <div class="modal-actions">
      <button id="logout-confirm-btn">Yes, Logout</button>
      <button id="logout-cancel-btn">Cancel</button>
    </div>
  </div>
</div>
<dotlottie-wc 
    id="player"
    src="https://lottie.host/2f36c027-f8b2-4cb6-bdfe-cede7cfcca4a/CQWjr6Q3jg.lottie"
    loop
    autoplay
    class="lottie-background">
</dotlottie-wc>
 
  <div class="container">
    <h1>üìä Stay on top of your finances</h1>
<div class="summary-cards">
  <div class="card">
    <h3>Total Income</h3>
    <p id="total-income">‚Çπ0</p>
  </div>
  <div class="card">
    <h3>Total Expense</h3>
    <p id="total-expense">‚Çπ0</p>
  </div>
  <div class="card">
    <h3>Balance</h3>
    <p id="balance">‚Çπ0</p>
  </div>
</div>
    <!-- Add Expense Form -->
    <div class="form-section">
  <h2>Add Records ‚ûï</h2>
  <form id="expense-form">
    <div class="input-group">
      <input type="text" id="title" placeholder=" " required>
      <label for="title">Title</label>
    </div>

    <div class="input-group">
      <input type="number" id="amount" placeholder=" " min="1">
      <label for="amount">Amount</label>
    </div>

    <div class="input-group">
      <select id="category"   required>
        <option value="" disabled selected></option>
        <option value="Income">Income</option>
        <option value="Expense">Expense</option>
      </select>
      <label for="category">Category</label>
    </div>

   <div class="input-group date-wrapper">
  <input type="text" id="date" required readonly>
  <label for="date">Date</label>
  <span class="calendar-icon">üìÖ</span>
</div>

    <button class="sbt">Submit</button>


    <div id="preview-modal" class="modal">
  <div class="modal-content">
    <h3>Confirm Expense</h3>
    <p><strong>Title:</strong> <span id="preview-title"></span></p>
    <p><strong>Amount:</strong> ‚Çπ<span id="preview-amount"></span></p>
    <p><strong>Category:</strong> <span id="preview-category"></span></p>
    <p><strong>Date:</strong> <span id="preview-date"></span></p>
    <div class="modal-actions">
      <button type="submit" id="confirm-btn">Confirm</button>
      <button type="button" id="cancel-btn">Cancel</button>
    </div>
  </div>
</div>
  </form>
</div>


    <!-- Expenses List -->
    <div class="list-section">
      <h2>Your Income & Expenses üíπ</h2>
      <ul id="expense-list"></ul>
    </div>
<div id="delete-modal" class="modal">
  <div class="modal-content">
    <h3><img width="25" height="25" src="https://img.icons8.com/glyph-neue/64/FA5252/trash.png" alt="trash"/>Delete Record</h3>
    <p id="delete-text">Are you sure you want to delete this expense?</p>
    <div class="modal-actions">
      <button id="delete-confirm-btn">Yes, Delete</button>
      <button id="delete-cancel-btn">Cancel</button>
    </div>
  </div>
</div>




   <!-- Update Form (hidden by default) -->
<!-- Update Modal -->
<div class="modal" id="update-modal">
  <div class="modal-content">
    <h3>Update Record ‚úèÔ∏è</h3>
    <form id="update-form">
      <input type="hidden" id="update-id">

      <div class="input-group">
        <input type="text" id="update-title" required>
        <label for="update-title">Title</label>
      </div>

      <div class="input-group">
        <input type="number" id="update-amount" required>
        <label for="update-amount">Amount</label>
      </div>

      <div class="input-group">
        <select id="update-category" required>
          <option value="" disabled selected style="color: black;">Select category</option>
          <option value="Income" style="color: black; font-weight: 600;" >Income</option>
          <option value="Expense" style="color: black; font-weight: 600;">Expense</option>
        </select>
        <label for="update-category" style="color: black;">Category</label>
      </div>

      <div class="input-group">
        <input type="text" id="update-date" required readonly>
        <label for="update-date" style="color: black;">Date</label>
        <span class="calendar-icon">üìÖ</span>
      </div>

      <div class="modal-actions">
        <button type="submit" id="update-confirm-btn">Update</button>
        <button type="button" id="update-cancel-btn">Cancel</button>
      </div>
    </form>
  </div>
</div>


</div>

  

  <script src="script.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", () => {
  const username = localStorage.getItem("username");
  if (username) {
    document.getElementById("profile-avatar").textContent =
      username.charAt(0).toUpperCase();
  }
});

document.addEventListener("DOMContentLoaded", () => {
  const username = localStorage.getItem("username");
  if (username) {
    document.getElementById("profile-avatar").textContent =
      username.charAt(0).toUpperCase();
  }

});
// Show logout modal
document.getElementById("logoutBtn").addEventListener("click", () => {
  document.getElementById("logout-modal").style.display = "flex";
});

// Cancel button hides modal
document.getElementById("logout-cancel-btn").addEventListener("click", () => {
  document.getElementById("logout-modal").style.display = "none";
});

// Confirm button actually logs out
document.getElementById("logout-confirm-btn").addEventListener("click", () => {
  localStorage.clear(); // clear user data
  window.location.href = "home.html"; // redirect to login
});
 
  </script>
</body>
</html>
